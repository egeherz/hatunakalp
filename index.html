<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Aşk V1000 - 3D Kalp Yağmuru</title>
<style>
  body, html {
    margin:0; padding:0; overflow:hidden; height:100%; background:#000;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
  }
  #login {
    position: absolute;
    top:0; left:0; width:100%; height:100%;
    background: linear-gradient(145deg, #000000, #1a1a1a);
    display:flex; flex-direction: column; justify-content:center; align-items:center;
    gap: 20px;
    z-index: 10;
  }
  #login input {
    width: 280px; padding: 14px 20px; font-size:18px;
    border-radius: 12px; border:none; background:#222; color:#fff;
  }
  #login button {
    padding: 14px 28px; font-size: 20px; border:none;
    border-radius: 14px; background:#ff2e63; color:#fff;
    cursor:pointer; box-shadow: 0 4px 10px #ff2e63aa;
    transition: background 0.3s;
  }
  #login button:hover {
    background:#ff4e85; box-shadow: 0 6px 15px #ff4e85cc;
  }
  #footer {
    position: absolute;
    bottom: 20px; right: 20px;
    color: white; font-size: 16px;
    text-shadow: 2px 2px 6px #000;
    z-index: 10;
    user-select: none;
  }
  canvas {
    display:block;
    position: fixed;
    top:0; left:0; width: 100%; height: 100%;
    z-index: 0;
  }
</style>
</head>
<body>

<div id="login">
  <h2>Hoşgeldin Aşkım ❤️</h2>
  <input type="text" id="username" placeholder="Kullanıcı Adı" autocomplete="off" />
  <input type="password" id="password" placeholder="Şifre" autocomplete="off" />
  <button id="loginBtn">Giriş Yap</button>
</div>

<div id="footer" style="display:none;">Oluşturan: Ege Deniz</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
<script>

(() => {
  const loginDiv = document.getElementById('login');
  const footer = document.getElementById('footer');
  const loginBtn = document.getElementById('loginBtn');

  let scene, camera, renderer, hearts = [], clock;

  // Arka plan olarak img kullanacağız - üç boyutlu sahne arka planına texture olarak

  function createHeartGeometry() {
    const x = 0, y = 0;
    const shape = new THREE.Shape();

    shape.moveTo(x, y + 0.5);
    shape.bezierCurveTo(x, y + 0.5, x - 0.5, y + 0.2, x - 0.5, y);
    shape.bezierCurveTo(x - 0.5, y - 0.35, x, y - 0.7, x, y - 1);
    shape.bezierCurveTo(x, y - 0.7, x + 0.5, y - 0.35, x + 0.5, y);
    shape.bezierCurveTo(x + 0.5, y + 0.2, x, y + 0.5, x, y + 0.5);

    const extrudeSettings = {
      steps: 2,
      depth: 0.3,
      bevelEnabled: true,
      bevelThickness: 0.1,
      bevelSize: 0.1,
      bevelSegments: 2
    };

    return new THREE.ExtrudeGeometry(shape, extrudeSettings);
  }

  function initThree() {
    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.z = 6;

    renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Arka plan texture olarak senin görselin:
    const loader = new THREE.TextureLoader();
    loader.load('https://i.imgur.com/saBY0cK.jpeg', (texture) => {
      scene.background = texture;
    });

    // Işıklar
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
    scene.add(ambientLight);

    const directionalLight = new THREE.DirectionalLight(0xff4081, 1);
    directionalLight.position.set(1, 1, 2);
    scene.add(directionalLight);

    clock = new THREE.Clock();
  }

  function createHeart() {
    const geometry = createHeartGeometry();

    const material = new THREE.MeshPhongMaterial({
      color: 0xff2e63,
      shininess: 80,
      specular: 0xffa1b9,
      flatShading: false,
    });

    const heartMesh = new THREE.Mesh(geometry, material);

    heartMesh.position.x = (Math.random() - 0.5) * 8;
    heartMesh.position.y = 6 + Math.random() * 2;
    heartMesh.position.z = (Math.random() - 0.5) * 5;

    const scale = 0.4 + Math.random() * 0.6;
    heartMesh.scale.set(scale, scale, scale);

    heartMesh.userData = {
      rotationSpeedX: (Math.random() - 0.5) * 0.02,
      rotationSpeedY: (Math.random() - 0.5) * 0.02,
      fallSpeed: 0.01 + Math.random() * 0.025
    };

    scene.add(heartMesh);
    hearts.push(heartMesh);
  }

  function animate() {
    requestAnimationFrame(animate);
    const delta = clock.getDelta();

    hearts.forEach(heart => {
      heart.position.y -= heart.userData.fallSpeed;
      heart.rotation.x += heart.userData.rotationSpeedX;
      heart.rotation.y += heart.userData.rotationSpeedY;

      if(heart.position.y < -6) {
        heart.position.y = 6 + Math.random() * 2;
        heart.position.x = (Math.random() - 0.5) * 8;
        heart.position.z = (Math.random() - 0.5) * 5;
      }
    });

    renderer.render(scene, camera);
  }

  function onWindowResize() {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  }

  function startHeartRain() {
    for(let i=0; i<50; i++) createHeart();
    animate();
  }

  loginBtn.onclick = () => {
    const user = document.getElementById('username').value.trim();
    const pass = document.getElementById('password').value.trim();
    if(user === 'egenaz' && pass === '11097') {
      loginDiv.style.display = 'none';
      footer.style.display = 'block';
      initThree();
      startHeartRain();
      window.addEventListener('resize', onWindowResize, false);
    } else {
      alert('Hatalı kullanıcı adı veya şifre!');
    }
  };
})();
</script>

<script>
  // Part 2 - Tıklama ile ekstra kalp patlamaları efekti

  (() => {
    // Three.js sahnesi ve kalpler PART1'de tanımlı, onları burada kullanıyoruz

    // Kalplerin içine etkileşim için ekstra kalpler patlatma fonksiyonu
    function burstHearts(x, y) {
      // Mouse pozisyonunu 3D dünyaya çevir
      const mouseVector = new THREE.Vector3(
        (x / window.innerWidth) * 2 - 1,
        - (y / window.innerHeight) * 2 + 1,
        0.5
      );

      mouseVector.unproject(camera);

      const dir = mouseVector.sub(camera.position).normalize();
      const distance = -camera.position.z / dir.z;
      const pos = camera.position.clone().add(dir.multiplyScalar(distance));

      for(let i=0; i<15; i++) {
        const geometry = createHeartGeometry();

        const material = new THREE.MeshPhongMaterial({
          color: 0xff2e63,
          shininess: 120,
          specular: 0xffa1b9,
          flatShading: false,
        });

        const heartMesh = new THREE.Mesh(geometry, material);

        // Patlama bölgesi etrafı rasgele pozisyonlar
        heartMesh.position.set(
          pos.x + (Math.random() - 0.5) * 1,
          pos.y + (Math.random() - 0.5) * 1,
          pos.z + (Math.random() - 0.5) * 1
        );

        const scale = 0.3 + Math.random() * 0.4;
        heartMesh.scale.set(scale, scale, scale);

        heartMesh.userData = {
          rotationSpeedX: (Math.random() - 0.5) * 0.1,
          rotationSpeedY: (Math.random() - 0.5) * 0.1,
          fallSpeed: 0.05 + Math.random() * 0.05,
          lifeTime: 2000 + Math.random() * 1000, // ms
          birthTime: performance.now()
        };

        scene.add(heartMesh);
        hearts.push(heartMesh);
      }
    }

    // Animate fonksiyonunu PART1'deki animate fonksiyonuna entegre edelim
    const oldAnimate = animate;
    animate = function() {
      requestAnimationFrame(animate);
      const delta = clock.getDelta();
      const now = performance.now();

      // Kalplerin standart hareketi
      hearts.forEach((heart, i) => {
        heart.position.y -= heart.userData.fallSpeed || 0.01;
        heart.rotation.x += heart.userData.rotationSpeedX || 0.01;
        heart.rotation.y += heart.userData.rotationSpeedY || 0.01;

        if (heart.userData.lifeTime) {
          // Eğer patlama kalbi ise süresi dolunca sahneden kaldır
          if(now - heart.userData.birthTime > heart.userData.lifeTime) {
            scene.remove(heart);
            hearts.splice(i, 1);
          }
        } else {
          // Normal kalp için ekran dışına çıkınca resetle
          if(heart.position.y < -6) {
            heart.position.y = 6 + Math.random() * 2;
            heart.position.x = (Math.random() - 0.5) * 8;
            heart.position.z = (Math.random() - 0.5) * 5;
          }
        }
      });

      renderer.render(scene, camera);
    };

    // Mouse veya dokunma ile kalp patlatma
    window.addEventListener('click', (e) => {
      burstHearts(e.clientX, e.clientY);
    });

    window.addEventListener('touchstart', (e) => {
      if(e.touches.length > 0) {
        burstHearts(e.touches[0].clientX, e.touches[0].clientY);
      }
    });

  })();
</script>
</body>
</html>
